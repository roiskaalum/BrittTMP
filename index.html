<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="libs/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
    <script src="libs/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="libs/node_modules/@popperjs/core/dist/umd/popper.min.js"></script>
    <script src="libs/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <title>DiscountCentral</title>
</head>
<body>
    <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" href="#">DiscountCentral</a>
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <span id="points-number">0</span> points
            </li>
        </ul>
    </nav>

    <!-- Original Carousel -->
    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" data-bs-interval="2000">
        <ol class="carousel-indicators">
            <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"></li>
            <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"></li>
            <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"></li>
            <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="3"></li>
        </ol>
        <div class="carousel-inner">
            <!-- Carousel items will be dynamically generated here -->
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    <!-- Scan Receipt Button -->
    <div class="container d-flex justify-content-center align-items-center pb-5 pt-5" style="height: 50vh;">
        <a href="scan.html" class="btn btn-success btn-lg" style="border-radius: 50px; width: 100%; height: 10%; display: flex; justify-content: center; align-items: center;">
            Scan Receipt
        </a>
    </div>

    <script>
        const coupons = [
            { title: "2 for 1 at McDonald's", description: "Get 2 items for the price of 1 at McDonald's.", cost: 10, type: "2 for 1", discount: 50, image: "https://via.placeholder.com/150" },
            { title: "20% off at Jack and Jones", description: "Get 20% off at Jack and Jones.", cost: 50, type: "percentage", discount: 20, image: "https://via.placeholder.com/150" },
            { title: "40% off at H&M", description: "Get 40% off at H&M.", cost: 30, type: "percentage", discount: 40, image: "https://via.placeholder.com/150" },
            { title: "15% off at Sunset Boulevard", description: "Get 15% off at Sunset Boulevard.", cost: 5, type: "percentage", discount: 15, image: "https://via.placeholder.com/150" }
        ];

        function getCheapestCoupon(type) {
            return coupons.filter(coupon => coupon.type === type).reduce((prev, curr) => prev.cost < curr.cost ? prev : curr);
        }

        function getMostExpensiveCoupon() {
            return coupons.reduce((prev, curr) => prev.cost > curr.cost ? prev : curr);
        }

        function getHighestDiscountCoupon() {
            return coupons.reduce((prev, curr) => prev.discount > curr.discount ? prev : curr);
        }

        function generateCarouselItems() {
            const carouselInner = document.querySelector('#carouselExampleIndicators .carousel-inner');

            const cheapest2For1 = getCheapestCoupon("2 for 1");
            const mostExpensive = getMostExpensiveCoupon();
            const highestDiscount = getHighestDiscountCoupon();
            const cheapestPercentage = getCheapestCoupon("percentage");

            const items = [cheapest2For1, mostExpensive, highestDiscount, cheapestPercentage];

            items.forEach((item, index) => {
                const carouselItem = document.createElement('div');
                carouselItem.className = `carousel-item ${index === 0 ? 'active' : ''}`;

                const card = document.createElement('div');
                card.className = 'card';

                const cardImage = document.createElement('img');
                cardImage.className = 'card-img-top';
                cardImage.src = item.image;
                cardImage.alt = item.title;

                const cardBody = document.createElement('div');
                cardBody.className = 'card-body';

                const cardTitle = document.createElement('h5');
                cardTitle.className = 'card-title';
                cardTitle.textContent = item.title;

                const cardText = document.createElement('p');
                cardText.className = 'card-text';
                cardText.textContent = item.description;

                const cardCost = document.createElement('p');
                cardCost.className = 'card-text';
                cardCost.innerHTML = `<small class="text-muted">Cost: ${item.cost} points</small>`;

                cardBody.appendChild(cardTitle);
                cardBody.appendChild(cardText);
                cardBody.appendChild(cardCost);
                card.appendChild(cardImage);
                card.appendChild(cardBody);
                carouselItem.appendChild(card);
                carouselInner.appendChild(carouselItem);
            });
        }

        document.addEventListener('DOMContentLoaded', generateCarouselItems);
    </script>
</body>
</html>